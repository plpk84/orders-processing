# orders-processing

### Необходимо разработать микросервисное приложение,моделирующее процесс оформления и обработки заказов.Архитектура включает два микросервиса и несколько компонентов.
# Архитектура 1.
## Микросервис: Order Service
### Функции:
1. REST API: 
* POST /orders — создание заказа.
* GET /orders/{id} — получение статуса заказа.
2. При создании заказа:
* Сохраняет заказ в PostgreSQL.
* Отправляет событие order.created в Kafka или RabbitMQ. 
3. Документация через OpenAPI (Swagger UI).
4. Логирование с использованием traceId.
#### Пример DTO для создания заказа (OrderRequestDto.java):
```java
public class OrderRequestDto { 
    private String customerFullName;   // Полное имя клиента, оформляющего заказ. 
    private List<OrderItemDto> items; // Список товаров в заказе.
    private String deliveryAddress;   // Адрес доставки заказа. 
}
```
#### Пример OrderItemDto.java:
```java
public class OrderItemDto { 
    private String productId;      // Уникальный идентификатор товара
    private int quantity;          // Количество единиц данного товара в заказе.
    private BigDecimal price;      // Цена за единицу товара на момент заказа.
}
```
# Архитектура 2.
## Микросервис: Processing Service
### Функции:
1. Подписка на событие order.created из Kafka или RabbitMQ.
2. Обработка заказа: 
* Сохранение информации об обработке в MongoDB. 
* Кэширование последнего обработанного заказа в Redis.
* Обновление статуса заказа в Order Service по API.
# Аналитика
1. Реализация отдельного endpoint’а /analytics, возвращающего:
* Общее количество заказов за текущий день.
* Среднее время обработки.
* Количество заказов по статусам.
2. Экспорт отчёта в PDF с сохранением в MinIO: 
* Включить в отчёт ключевые метрики, дату, общее количество заказов, ФИО пользователя. 
* Сгенерировать ссылку на файл и вернуть его в ответе.
# Инфраструктура
### Проект разворачивается с использованием Docker Compose. Сервисы:
* PostgreSQL
* MongoDB
* Redis
* Kafka (или RabbitMQ)
* MinIO
# Требования
* Юнит-тесты с покрытием > 65%
* Структурированное логирование.
